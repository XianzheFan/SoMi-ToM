# SoMi Embodied Interaction Environment

SoMi is easily extendable and supports LVLM agents controlling characters in the open-world game Minecraft, allowing them to collaborate with other agents to achieve crafting goals. The interaction logs, game screenshots, and videos generated by the interactive environment will be used for the SoMi-ToM evaluation. 

## Requirements

- [Minecraft Java Edition](https://www.minecraft.net/en-us/store/minecraft-java-bedrock-edition-pc) (up to v1.21.1, recommend v1.20.1)
- [Node.js Installed](https://nodejs.org/) (at least v14)
- [OpenAI API Key](https://openai.com/blog/openai-api)

## Install and Run

1. Make sure you have the requirements above.

2. Clone or download this repository (big green button).

3. Rename `keys.example.json` to `keys.json` and fill in your API keys (you only need one).

4. In terminal/command prompt, run `npm install` from the installed directory.

5. Clone or download [feature/minecraft-update branch](https://github.com/sotopia-lab/sotopia/tree/feature/minecraft-update) in Sotopia repository.

```
cd examples/experimental/minecraft_agents
uvicorn group_discussion_agents:app --reload --port 8080
```

```
// Open a new terminal
cd examples/experimental/minecraft_agents
export OPENAI_API_KEY=sk-  // Enter your OpenAI API key here
uv run aact run-dataflow group_discussion_agents.toml
```

6. Enter `Minecraft Java Edition`, select `Singleplayer`, `1.20.1 version`, and `Survival Mode`, then click `Open to LAN 55916`.

7. Open a new terminal, than run `node src/agent/index.js` from this repository.

## Bot Profiles

Bot profiles are [toml files](https://huggingface.co/datasets/SoMi-ToM/SoMi-ToM/tree/main/toml_files) that define:

1. Crafting Goal

You and your friends need to craft 2 ‚Äúboat‚Äù.

2. Knowledge - Specific Crafting Rule

The complete process for crafting a ‚Äúboat‚Äù in Minecraft is as follows:

......

## Patches

Some of the node modules that we depend on have bugs in them. To add a patch, change your local node module file and run `npx patch-package [package-name]`

# SoMi-ToM Benchmark

We propose the SoMi-ToM benchmark, designed to evaluate multi-perspective ToM in embodied multi-agent complex social interactions. This benchmark is based on rich multimodal interaction data generated by the interaction environment SoMi, covering diverse crafting goals and social relationships.
See dataset at [SoMi-ToM](https://huggingface.co/datasets/SoMi-ToM/SoMi-ToM).

## üî• Latest LVLM Benchmark Table

Performance of humans and leading closed-source or open-source LVLMs in the first-person evaluation (state inference). There are 350 questions for self-ToM reasoning and 700 questions for others‚Äô ToM reasoning. 

![image/png](https://storage.googleapis.com/minecraft_screenshot/table1.jpg)

Performance of humans and leading closed-source and open-source LVLMs in the Third-Person Perspective ToM test (175 questions in total). Highest accuracy without CoT is shown in red bold, and with CoT in blue bold. 

![image/png](https://storage.googleapis.com/minecraft_screenshot/table2.png)

## ‚ù§Ô∏è Acknowledgements

The **SoMi-ToM** benchmark references the following code repositories:

https://github.com/PrismarineJS/prismarine-viewer

https://github.com/kolbytn/mindcraft

https://github.com/ProKil/aact

https://sotopia.world/projects/sotopia

Thanks for their awesome work!
